// Code is generated by Telerik Data Access Service Wizard
// using WebApiController.tt template

using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web;
using System.Web.Http;
using System.Web.Http.OData;
using MyERP.DataAccess;
using Telerik.OpenAccess;

namespace MyERP.Web
{
    /// <summary>
    /// Web API Controller for Accounts entity defined in MyERP.DataAccess.EntitiesModel data model
    /// </summary>

    public partial class GeneralJournalSetupsController 
    {
        public SingleResult<GeneralJournalSetup> GetAccount([FromODataUri] Guid key)
        {
            return SingleResult.Create(repository.GetAll().Where(c => c.Id == key).AsQueryable());
        }

        /// <summary>
        /// Updates single entity.
        /// </summary>
        /// <remarks>Replaces the whole existing entity with the provided one</remarks>
        /// <param name="key">ID of the entity to update</param>
        /// <param name="entity">Entity with the new updated values</param>
        /// <returns>HttpStatusCode.BadRequest if ID parameter does not match the ID value of the entity,
        /// or HttpStatusCode.NoContent if the operation was successful</returns>
        public IHttpActionResult PutGeneralJournalSetup([FromODataUri] Guid key, MyERP.DataAccess.GeneralJournalSetup entity)
        {
            if (!ModelState.IsValid)
            {
                return BadRequest(ModelState);
            }

            if (entity == null || key != entity.Id)
                return BadRequest();

            repository.Update(entity);

            return Updated(entity);
        }

        [AcceptVerbs("PATCH", "MERGE")]
        public IHttpActionResult Patch([FromODataUri] Guid key, Delta<MyERP.DataAccess.GeneralJournalSetup> patch)
        {
            if (!ModelState.IsValid)
            {
                return BadRequest(ModelState);
            }

            GeneralJournalSetup entity = repository.GetBy(c => c.Id == key);
            if (entity == null)
            {
                return NotFound();
            }

            patch.Patch(entity);

            try
            {
                repository.Update(entity);
            }
            catch (Telerik.OpenAccess.Exceptions.OptimisticVerificationException e)
            {
                if (repository.GetBy(c => c.Id == key) == null)
                {
                    return NotFound();
                }
                else
                {
                    throw;
                }
            }

            return Updated(entity);
        }

        /// <summary>
        /// Deletes an entity by it's ID
        /// </summary>
        /// <param name="key">ID of the entity to delete</param>
        /// <returns>Always HttpStatusCode.OK</returns>
        public IHttpActionResult DeleteAccount([FromODataUri] Guid key)
        {
            return StatusCode(HttpStatusCode.NoContent);
        }

        /// <summary>
        /// Creates a new entity based on the provided data
        /// </summary>
        /// <param name="entity">The new entity to be created</param>
        /// <returns>HTTP Status:
        /// - Accepted when operation is successful or 
        /// - MethodNotAllowed if the operation is disabled for this entity or
        /// - BadRequest if the provided entity is NULL</returns>
        public IHttpActionResult PostAccount(MyERP.DataAccess.Account entity)
        {
            return StatusCode(HttpStatusCode.NoContent);
        }
    }
}
